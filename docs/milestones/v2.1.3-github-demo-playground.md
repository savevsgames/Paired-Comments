# GitHub Demo Playground (v2.1.3)

**Status:** 📋 PLANNED
**Target:** December 2025 (2-3 weeks)
**Version:** 2.1.3
**Dependencies:** v2.1.2 (Orphan Detection UI)

---

## 🎯 Goal

Create a **containerized, interactive demo environment** that showcases Paired Comments in a fake GitHub UI. This serves as:
1. **Marketing asset** - Live demo for potential users/investors
2. **Testing playground** - Real-world scenarios for validating features
3. **Proof-of-concept** - Shows extension working end-to-end
4. **Foundation for MCP demo** - Will add AI integration in v2.2.1

---

## 📋 Overview

**What is this?**
A fully containerized Next.js web app that mimics GitHub's file viewer UI, with Monaco editor embedded and the Paired Comments extension running in a browser-compatible environment.

**Why containerized?**
- ✅ Reproducible across all platforms (Windows, Mac, Linux)
- ✅ Docker Desktop available on dev machine
- ✅ Easy deployment to cloud (Vercel, AWS, Azure)
- ✅ Isolated environment prevents conflicts
- ✅ Simple setup: `docker-compose up`

**Tech Stack:**
- **Frontend:** Next.js 14 (React + TypeScript)
- **Editor:** Monaco Editor (VS Code editor engine)
- **Extension Runtime:** Custom VS Code API shim (minimal implementation)
- **Container:** Docker + Docker Compose
- **Styling:** Tailwind CSS (GitHub-like UI)
- **State:** React Context + LocalStorage (persistence)

---

## 🏗️ Architecture

```
┌─────────────────────────────────────────────────────┐
│  Docker Container (Node 20 Alpine)                  │
│  ┌───────────────────────────────────────────────┐  │
│  │  Next.js 14 App (Port 3000)                   │  │
│  │  ┌─────────────────────────────────────────┐  │  │
│  │  │  Fake GitHub UI (React Components)      │  │  │
│  │  │  ┌───────────────────────────────────┐  │  │  │
│  │  │  │  Monaco Editor                    │  │  │  │
│  │  │  │  ┌─────────────────────────────┐  │  │  │  │
│  │  │  │  │  Paired Comments Extension  │  │  │  │  │
│  │  │  │  │  (Transpiled to Browser)    │  │  │  │  │
│  │  │  │  └─────────────────────────────┘  │  │  │  │
│  │  │  │                                   │  │  │  │
│  │  │  │  VS Code API Shim Layer          │  │  │  │
│  │  │  │  (Minimal implementation)         │  │  │  │
│  │  │  └───────────────────────────────────┘  │  │  │
│  │  │                                         │  │  │
│  │  │  File System Abstraction (IndexedDB)   │  │  │
│  │  └─────────────────────────────────────────┘  │  │
│  └───────────────────────────────────────────────┘  │
│                                                      │
│  Volume: ./demo-data → /app/data (pre-loaded files) │
└─────────────────────────────────────────────────────┘
```

### Key Components

#### 1. Fake GitHub UI
React components mimicking GitHub's file viewer:
- **File tree sidebar** - Navigate 20+ example files
- **File header bar** - Filename, language badge, stats
- **Monaco editor** - Full VS Code editing experience
- **Paired comments sidebar** - Shows `.comments` file side-by-side
- **Action bar** - Export, share, reset buttons

#### 2. Monaco Editor Integration
- Full syntax highlighting for JS/TS/Python/Go/etc.
- IntelliSense (basic - no type checking)
- Paired Comments extension running in browser
- Gutter icons, hover previews, CodeLens working

#### 3. VS Code API Shim
Minimal browser-compatible implementation of VS Code APIs used by Paired Comments:
```typescript
// Implemented APIs (subset)
vscode.window.showInformationMessage()
vscode.workspace.openTextDocument()
vscode.workspace.fs.readFile()
vscode.workspace.fs.writeFile()
vscode.languages.registerCodeLensProvider()
vscode.window.createTextEditorDecorationType()
// ... (only what extension uses)
```

#### 4. File System Abstraction
- **IndexedDB** - Stores source files + `.comments` files in browser
- **Pre-loaded examples** - 20+ curated files baked into container
- **Persistence** - Changes saved locally (reset button to restore)
- **Export** - Download modified files as ZIP

---

## 📁 Project Structure

```
demo-playground/
├── docker-compose.yml           # Multi-container orchestration
├── Dockerfile                    # Next.js app container
├── package.json                  # Dependencies
├── next.config.js                # Next.js configuration
├── tailwind.config.js            # Tailwind CSS setup
├── tsconfig.json                 # TypeScript config
│
├── src/
│   ├── app/                      # Next.js 14 app directory
│   │   ├── page.tsx              # Main demo page
│   │   ├── layout.tsx            # Root layout
│   │   └── globals.css           # Global styles
│   │
│   ├── components/
│   │   ├── GitHubUI/
│   │   │   ├── FileTree.tsx      # Left sidebar file explorer
│   │   │   ├── FileHeader.tsx    # Top bar (filename, stats)
│   │   │   ├── EditorPane.tsx    # Monaco editor wrapper
│   │   │   ├── CommentsPane.tsx  # Right sidebar (.comments view)
│   │   │   └── ActionBar.tsx     # Export, share, reset buttons
│   │   │
│   │   └── Monaco/
│   │       ├── MonacoEditor.tsx  # Monaco wrapper component
│   │       └── PairedCommentsExtension.tsx  # Extension loader
│   │
│   ├── lib/
│   │   ├── vscode-shim/
│   │   │   ├── index.ts          # Main VS Code API shim
│   │   │   ├── workspace.ts      # Workspace API implementation
│   │   │   ├── window.ts         # Window API implementation
│   │   │   ├── languages.ts      # Language API implementation
│   │   │   └── fs.ts             # FileSystem API (IndexedDB)
│   │   │
│   │   ├── filesystem/
│   │   │   ├── indexeddb.ts      # IndexedDB wrapper
│   │   │   └── preload.ts        # Load example files on init
│   │   │
│   │   └── examples/
│   │       └── load-examples.ts  # Example file loader
│   │
│   └── data/
│       └── examples/              # Pre-loaded example files
│           ├── javascript/
│           │   ├── react-component.js
│           │   ├── react-component.js.comments
│           │   ├── express-api.js
│           │   ├── express-api.js.comments
│           │   └── ...
│           ├── typescript/
│           │   ├── auth-service.ts
│           │   ├── auth-service.ts.comments
│           │   └── ...
│           ├── python/
│           │   ├── ml-model.py
│           │   ├── ml-model.py.comments
│           │   └── ...
│           └── go/
│               ├── http-server.go
│               ├── http-server.go.comments
│               └── ...
│
└── paired-comments-extension/    # Symlink or copy of extension code
    └── (transpiled extension bundle)
```

---

## 🐳 Docker Setup

### docker-compose.yml
```yaml
version: '3.8'

services:
  demo-playground:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: paired-comments-demo
    ports:
      - "3000:3000"
    volumes:
      # Mount example files (read-only for reset functionality)
      - ./src/data/examples:/app/data/examples:ro
      # Development hot-reload (optional, remove for production)
      - ./src:/app/src
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - NEXT_PUBLIC_APP_NAME=Paired Comments Demo
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000"]
      interval: 30s
      timeout: 10s
      retries: 3
```

### Dockerfile
```dockerfile
# Stage 1: Build Next.js app
FROM node:20-alpine AS builder

WORKDIR /app

# Copy package files
COPY package.json package-lock.json ./
RUN npm ci

# Copy source code
COPY . .

# Build Next.js app
RUN npm run build

# Stage 2: Production runtime
FROM node:20-alpine AS runner

WORKDIR /app

# Copy built app from builder
COPY --from=builder /app/.next ./.next
COPY --from=builder /app/public ./public
COPY --from=builder /app/package.json ./package.json
COPY --from=builder /app/node_modules ./node_modules

# Expose port
EXPOSE 3000

# Health check
HEALTHCHECK --interval=30s --timeout=10s --retries=3 \
  CMD wget --quiet --tries=1 --spider http://localhost:3000 || exit 1

# Start Next.js
CMD ["npm", "start"]
```

### Usage
```bash
# Start demo playground
cd demo-playground
docker-compose up

# Access at http://localhost:3000

# Stop
docker-compose down
```

---

## 📚 Example Files (20+ Curated Scenarios)

### Categories

#### 1. JavaScript/TypeScript (8 examples)
- **React Component** - Class component with lifecycle methods, complex state
- **Express API** - REST endpoints with middleware, error handling
- **Async Utilities** - Promise chains, error handling, retries
- **TypeScript Generics** - Type-safe data structures
- **Redux Store** - Actions, reducers, selectors
- **Jest Tests** - Unit tests with mocking
- **Webpack Config** - Complex build configuration
- **Node CLI Tool** - Argument parsing, file I/O

#### 2. Python (5 examples)
- **ML Model Training** - TensorFlow/PyTorch pipeline
- **Django View** - Database queries, serialization
- **Data Processing** - Pandas transformations
- **Async API Client** - aiohttp, error handling
- **Scientific Computing** - NumPy/SciPy algorithms

#### 3. Go (3 examples)
- **HTTP Server** - Goroutines, channels, middleware
- **Database Layer** - SQL queries, connection pooling
- **CLI Application** - Cobra commands, flags

#### 4. Other Languages (4 examples)
- **Rust** - Ownership, lifetimes, error handling
- **Java** - Spring Boot controller
- **C#** - ASP.NET Core API
- **SQL** - Complex queries with CTEs

### Example Structure
Each example includes:
- **Source file** - Real-world code (100-300 lines)
- **`.comments` file** - 5-15 paired comments showing various features:
  - Inline comments (function-level notes)
  - Range comments (multi-line explanations)
  - Tags (TODO, FIXME, NOTE, QUESTION, etc.)
  - AI metadata (complexity, tokens, parameters)
  - Dynamic params (${functionName}, ${complexity})
  - Ghost markers (AST anchors for tracking)

---

## 🎨 UI/UX Design

### Layout (GitHub-inspired)

```
┌─────────────────────────────────────────────────────────────────┐
│  Paired Comments Demo                    [Export] [Share] [Reset]│
├──────────┬──────────────────────────────────────────────────────┤
│          │  📄 react-component.js                    JavaScript │
│  Files   │  ┌────────────────────────────────────────────────┐  │
│          │  │  1  import React from 'react';                │  │
│  📁 JS   │  │  2                                            │  │
│    ├ R.. │  │  3  class TodoList extends React.Component {  │ ⚡│
│    ├ E.. │  │  4    constructor(props) {                    │  │
│    └ A.. │  │  5      super(props);                         │  │
│          │  │  6      this.state = { todos: [] };           │  │
│  📁 TS   │  │  7    }                                       │  │
│    ├ A.. │  │  8                                            │  │
│    └ T.. │  │  9    componentDidMount() {                   │ ⚡│
│          │  │ 10      // Fetch todos from API              │  │
│  📁 PY   │  │ ...                                           │  │
│    └ M.. │  └────────────────────────────────────────────────┘  │
│          │                                                       │
│  📁 GO   │  ⚡ = Ghost marker (click to open comment)            │
│    └ H.. │                                                       │
└──────────┴───────────────────────────────────────────────────────┘

When clicking a ghost marker:
┌─────────────────────────────────────────────────────────────────┐
│  Paired Comments Demo                    [Export] [Share] [Reset]│
├──────────┬──────────────────┬──────────────────────────────────┤
│          │  react-compon... │  📝 react-component.js.comments  │
│  Files   │  (editor pane)   │                                  │
│          │                  │  💡 NOTE - Line 3                │
│  📁 JS   │  (code showing)  │  ┌────────────────────────────┐  │
│    ├ R.. │                  │  │ Main TodoList component.   │  │
│    ├ E.. │                  │  │                            │  │
│    └ A.. │                  │  │ Complexity: 8 (Medium)     │  │
│          │                  │  │ Tokens: ~450               │  │
│          │                  │  │ Function: TodoList         │  │
│          │                  │  │                            │  │
│          │                  │  │ Uses class-based React     │  │
│          │                  │  │ with lifecycle methods.    │  │
│          │                  │  └────────────────────────────┘  │
│          │                  │                                  │
│          │                  │  🔧 TODO - Line 9                │
│          │                  │  ┌────────────────────────────┐  │
│          │                  │  │ Add error handling for     │  │
│          │                  │  │ failed API requests.       │  │
│          │                  │  └────────────────────────────┘  │
└──────────┴──────────────────┴──────────────────────────────────┘
```

### Features Showcased

1. **Gutter Icons** - Colored icons per tag type (💡 NOTE, 🔧 TODO, etc.)
2. **Hover Previews** - Hover over gutter icon shows comment preview
3. **CodeLens Links** - Inline "Click to Open" links above functions
4. **Side-by-side View** - `.comments` file opens in right pane
5. **Scroll Sync** - Scrolling editor syncs to relevant comments
6. **AI Metadata Display** - Show complexity, tokens, function info in comments
7. **Dynamic Parameters** - Interpolated values (${functionName} → "TodoList")
8. **Orphan Detection** - Visual warnings for orphaned comments (if v2.1.2 complete)

---

## 🔧 Implementation Phases

### Phase 1: Container Setup (3 days)
**Goal:** Get Next.js app running in Docker

- [ ] Create `docker-compose.yml` and `Dockerfile`
- [ ] Initialize Next.js 14 project with TypeScript
- [ ] Add Tailwind CSS
- [ ] Verify `docker-compose up` works
- [ ] Add hot-reload for development

**Acceptance Criteria:**
- ✅ `docker-compose up` starts app on http://localhost:3000
- ✅ Hot reload works when editing files
- ✅ TypeScript compiles without errors

---

### Phase 2: Fake GitHub UI (4 days)
**Goal:** Build GitHub-like file viewer interface

- [ ] Create file tree component (left sidebar)
- [ ] Create file header component (top bar)
- [ ] Create editor pane component (center)
- [ ] Create comments pane component (right sidebar)
- [ ] Create action bar (export, share, reset)
- [ ] Style with Tailwind to match GitHub aesthetics
- [ ] Add responsive layout (works on mobile)

**Acceptance Criteria:**
- ✅ UI visually resembles GitHub's file viewer
- ✅ File tree allows navigation between examples
- ✅ Clicking file loads it in editor
- ✅ Layout is responsive (tested on 1920x1080, 1366x768, mobile)

---

### Phase 3: Monaco Editor Integration (3 days)
**Goal:** Embed Monaco editor with syntax highlighting

- [ ] Install `@monaco-editor/react`
- [ ] Create Monaco wrapper component
- [ ] Configure syntax highlighting for all languages
- [ ] Add basic IntelliSense (no type checking)
- [ ] Wire up file loading/saving to IndexedDB
- [ ] Add editor settings (theme, font size, minimap)

**Acceptance Criteria:**
- ✅ Monaco editor loads and displays code
- ✅ Syntax highlighting works for JS/TS/Python/Go/etc.
- ✅ Editing code persists to IndexedDB
- ✅ Can switch between files without losing changes

---

### Phase 4: VS Code API Shim (5 days)
**Goal:** Create minimal VS Code API for extension

- [ ] Implement `vscode.workspace` API subset
  - `openTextDocument()`, `fs.readFile()`, `fs.writeFile()`
- [ ] Implement `vscode.window` API subset
  - `showInformationMessage()`, `createTextEditorDecorationType()`
- [ ] Implement `vscode.languages` API subset
  - `registerCodeLensProvider()`, `registerHoverProvider()`
- [ ] Create IndexedDB filesystem abstraction
- [ ] Add event emitters for file changes

**Acceptance Criteria:**
- ✅ Extension can read/write files via shim API
- ✅ Extension can show notifications
- ✅ Extension can register CodeLens providers
- ✅ Changes persist to IndexedDB

---

### Phase 5: Extension Integration (4 days)
**Goal:** Load Paired Comments extension in browser

- [ ] Transpile extension code to browser-compatible bundle (Webpack/Vite)
- [ ] Load extension in Monaco editor
- [ ] Verify gutter icons appear
- [ ] Verify hover previews work
- [ ] Verify CodeLens links work
- [ ] Verify `.comments` files load/save correctly
- [ ] Test all extension commands (add, edit, delete, etc.)

**Acceptance Criteria:**
- ✅ Extension loads without errors
- ✅ Gutter icons display for all comments
- ✅ Hover previews show comment text
- ✅ CodeLens links open `.comments` file in right pane
- ✅ Can add/edit/delete comments via UI
- ✅ Changes persist to IndexedDB

---

### Phase 6: Example Files (3 days)
**Goal:** Create 20+ curated example files

- [ ] Create 8 JavaScript/TypeScript examples
- [ ] Create 5 Python examples
- [ ] Create 3 Go examples
- [ ] Create 4 other language examples (Rust, Java, C#, SQL)
- [ ] Write matching `.comments` files for each
- [ ] Add AI metadata to comments (complexity, tokens, params)
- [ ] Verify all examples load correctly
- [ ] Test reset button restores original files

**Acceptance Criteria:**
- ✅ All 20+ examples load without errors
- ✅ Each example has 5-15 paired comments
- ✅ AI metadata displays correctly
- ✅ Dynamic parameters interpolate correctly
- ✅ Reset button restores original files

---

### Phase 7: Export & Share (2 days)
**Goal:** Add export and share functionality

- [ ] Implement "Export" button
  - Download current file + `.comments` as ZIP
  - Include metadata JSON file
- [ ] Implement "Share" button
  - Generate shareable link (encode files in URL params or save to DB)
  - Copy link to clipboard
- [ ] Add "Reset" button
  - Restore original example files from container volume

**Acceptance Criteria:**
- ✅ Export downloads ZIP with source + `.comments` files
- ✅ Share generates link that loads same state
- ✅ Reset restores original files

---

### Phase 8: Polish & Testing (3 days)
**Goal:** Final polish and bug fixes

- [ ] Add loading states and spinners
- [ ] Add error boundaries for React components
- [ ] Add analytics (optional - track which examples are viewed)
- [ ] Write E2E tests (Playwright)
- [ ] Test on Windows, Mac, Linux
- [ ] Test in Chrome, Firefox, Safari, Edge
- [ ] Optimize bundle size
- [ ] Add meta tags for social sharing (Open Graph, Twitter Card)

**Acceptance Criteria:**
- ✅ No console errors
- ✅ Works on all platforms and browsers
- ✅ E2E tests pass
- ✅ Load time < 3 seconds
- ✅ Social sharing previews look good

---

## 📊 Success Metrics

### Technical
- ✅ Docker container builds in < 2 minutes
- ✅ App loads in < 3 seconds
- ✅ All 20+ examples load without errors
- ✅ Extension features work (gutter icons, hover, CodeLens)
- ✅ Zero console errors in browser

### User Experience
- ✅ UI closely resembles GitHub (90%+ visual similarity)
- ✅ Users can navigate examples without instructions
- ✅ Comments are easy to read and understand
- ✅ Export/share features work intuitively

### Strategic
- ✅ Can demo extension in < 5 minutes
- ✅ Showcases all core features (AST tracking, AI metadata, params)
- ✅ Ready for MCP integration (v2.2.1)
- ✅ Generates user interest (measure via analytics)

---

## 🚀 Deployment Strategy

### Local Development
```bash
cd demo-playground
docker-compose up
```
Access at http://localhost:3000

### Production Deployment Options

#### Option 1: Vercel (Recommended)
- Push to GitHub
- Connect Vercel to repo
- Auto-deploy on push
- Free tier: 100GB bandwidth/month
- Custom domain support

#### Option 2: AWS ECS (Fargate)
- Push Docker image to ECR
- Deploy to ECS with Fargate
- ALB for load balancing
- CloudFront for CDN
- Cost: ~$20-30/month

#### Option 3: Azure Container Apps
- Push Docker image to ACR
- Deploy to Container Apps
- Auto-scaling
- Custom domain + SSL
- Cost: ~$15-25/month

#### Option 4: Self-Hosted (Docker Compose)
- Use existing server
- Run `docker-compose up -d`
- Nginx reverse proxy
- Let's Encrypt SSL
- Cost: $0 (if server already exists)

**Recommendation:** Start with Vercel (free, easy), migrate to cloud if traffic grows.

---

## 🔮 Future Enhancements (v2.2.1 - MCP Demo)

Once MCP integration is complete, add:
- **AI Chat Panel** - Claude/GPT sidebar that can read/write comments
- **Live AI Suggestions** - AI proposes comments as you code
- **Training Data Export** - Show how comments convert to training data
- **Model Comparison** - Split screen showing AI trained with vs without comments

This will become the **MCP Demo Playground** milestone.

---

## 📝 Open Questions

1. **IndexedDB vs In-Memory?** - IndexedDB for persistence or just in-memory state?
   - **Recommendation:** IndexedDB for better UX (preserves changes on refresh)

2. **Real GitHub Login?** - Allow users to fork examples to real GitHub repos?
   - **Recommendation:** Defer to v2.2.0 (adds complexity, not core to demo)

3. **Analytics?** - Track which examples are viewed, how long users spend?
   - **Recommendation:** Yes - use Vercel Analytics (free) or PostHog (open-source)

4. **Multi-Language Support?** - Translate UI to other languages?
   - **Recommendation:** English only for MVP, add i18n later if demand

5. **Mobile Optimization?** - Full mobile support or desktop-only?
   - **Recommendation:** Responsive layout, but optimized for desktop (editor UX)

---

## 🎯 Definition of Done

- [ ] Docker container builds and runs (`docker-compose up`)
- [ ] All 20+ example files load correctly
- [ ] Paired Comments extension works (gutter icons, hover, CodeLens)
- [ ] AI metadata displays in comments
- [ ] Dynamic parameters interpolate correctly
- [ ] Export/share/reset buttons work
- [ ] UI closely resembles GitHub
- [ ] No console errors
- [ ] Works on Windows/Mac/Linux
- [ ] Works in Chrome/Firefox/Safari/Edge
- [ ] E2E tests pass
- [ ] Deployed to Vercel or equivalent
- [ ] Documentation updated (ROADMAP.md, CHANGELOG.md)
- [ ] Committed to Git with tag `v2.1.3`

---

## 📚 References

- [Monaco Editor Docs](https://microsoft.github.io/monaco-editor/)
- [Next.js 14 Docs](https://nextjs.org/docs)
- [Docker Compose Reference](https://docs.docker.com/compose/)
- [VS Code API Reference](https://code.visualstudio.com/api/references/vscode-api)
- [IndexedDB Tutorial](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)
- [Tailwind CSS Docs](https://tailwindcss.com/docs)

---

**Next Steps:**
1. Review this design document
2. Get approval to proceed
3. Create `demo-playground/` directory
4. Start Phase 1 (Container Setup)
